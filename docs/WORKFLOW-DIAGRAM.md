# Knowledge Base + NotebookLM MCP â€” Data Flow & Workflow Diagram

**Project:** KSU Athletics 2026 StratOS
**Date:** February 20, 2026

---

## High-Level System Architecture

```
 â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
 â•‘                         StratOS WEB APPLICATION                        â•‘
 â•‘                        (React + Vite + TypeScript)                     â•‘
 â•‘                                                                        â•‘
 â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â•‘
 â•‘  â”‚   DASHBOARD     â”‚  â”‚   BUDGET VIEW   â”‚  â”‚  STRATEGIC ASSISTANT  â”‚   â•‘
 â•‘  â”‚                 â”‚  â”‚                 â”‚  â”‚                       â”‚   â•‘
 â•‘  â”‚ 5 Pillars       â”‚  â”‚ Revenue Cards   â”‚  â”‚ Voice Agent (Gemini)  â”‚   â•‘
 â•‘  â”‚ KPIs            â”‚  â”‚ Expense Bars    â”‚  â”‚ Text Chat             â”‚   â•‘
 â•‘  â”‚ Architect Mode  â”‚  â”‚ Capital List    â”‚  â”‚ Function Calling      â”‚   â•‘
 â•‘  â”‚ Collaborator UI â”‚  â”‚ AI Analysis     â”‚  â”‚ query_notebook tool   â”‚   â•‘
 â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â•‘
 â•‘           â”‚                    â”‚                        â”‚              â•‘
 â•‘           â–¼                    â–¼                        â–¼              â•‘
 â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â•‘
 â•‘  â”‚                    KNOWLEDGE BASE (KB)                          â”‚   â•‘
 â•‘  â”‚                    knowledgeBase.ts                              â”‚   â•‘
 â•‘  â”‚                                                                 â”‚   â•‘
 â•‘  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â•‘
 â•‘  â”‚  â”‚ Core         â”‚ â”‚ Strategic    â”‚ â”‚ Budget Intelligence    â”‚  â”‚   â•‘
 â•‘  â”‚  â”‚ Objectives   â”‚ â”‚ Pillars     â”‚ â”‚                        â”‚  â”‚   â•‘
 â•‘  â”‚  â”‚              â”‚ â”‚              â”‚ â”‚ totalRevenue            â”‚  â”‚   â•‘
 â•‘  â”‚  â”‚ $10M revenue â”‚ â”‚ Revenue Ops  â”‚ â”‚ totalExpenses           â”‚  â”‚   â•‘
 â•‘  â”‚  â”‚ Brand Elev.  â”‚ â”‚ Student Exp  â”‚ â”‚ revenueByCategory{}    â”‚  â”‚   â•‘
 â•‘  â”‚  â”‚ Facility Mod â”‚ â”‚ Competitive  â”‚ â”‚ expenseByCategory{}    â”‚  â”‚   â•‘
 â•‘  â”‚  â”‚ Culture Trns â”‚ â”‚ Governance   â”‚ â”‚ capitalProjects[]      â”‚  â”‚   â•‘
 â•‘  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ notebookInsights[]     â”‚  â”‚   â•‘
 â•‘  â”‚                                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â•‘
 â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â•‘
 â•‘                             â”‚                                          â•‘
 â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                               â”‚
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚                   â”‚                   â”‚
           â–¼                   â–¼                   â–¼
 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 â”‚  OPTION 1       â”‚ â”‚  OPTION 2       â”‚ â”‚  OPTION 3       â”‚
 â”‚  MCP CLIENT     â”‚ â”‚  SYNC PIPELINE  â”‚ â”‚  ENTERPRISE API â”‚
 â”‚                 â”‚ â”‚                 â”‚ â”‚                 â”‚
 â”‚ notebookLm      â”‚ â”‚ notebookLm      â”‚ â”‚ notebookLm      â”‚
 â”‚ Mcp.ts          â”‚ â”‚ Sync.ts         â”‚ â”‚ Enterprise.ts   â”‚
 â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                   â”‚                   â”‚
          â–¼                   â–¼                   â–¼
 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 â”‚ EXPRESS PROXY   â”‚ â”‚ SheetJS PARSER  â”‚ â”‚ GOOGLE CLOUD    â”‚
 â”‚ :3001           â”‚ â”‚                 â”‚ â”‚ Discovery Engineâ”‚
 â”‚                 â”‚ â”‚ .xlsx â†’ JSON    â”‚ â”‚ REST API v1     â”‚
 â”‚ HTTP â†’ stdio    â”‚ â”‚ categorize()    â”‚ â”‚ OAuth2 / APIKey â”‚
 â”‚ bridge          â”‚ â”‚ aggregate()     â”‚ â”‚                 â”‚
 â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                   â”‚                   â”‚
          â–¼                   â”‚                   â–¼
 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 â”‚ notebooklm-mcp  â”‚          â”‚          â”‚ Google Cloud     â”‚
 â”‚ (stdio process) â”‚          â”‚          â”‚ Project          â”‚
 â”‚                 â”‚          â”‚          â”‚                  â”‚
 â”‚ JSON-RPC 2.0    â”‚          â”‚          â”‚ Discovery Engine â”‚
 â”‚ over stdin/out  â”‚          â”‚          â”‚ Data Store       â”‚
 â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                   â”‚                   â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   NOTEBOOKLM      â”‚
                    â”‚   NOTEBOOK         â”‚
                    â”‚                   â”‚
                    â”‚   ID: 21aca734... â”‚
                    â”‚                   â”‚
                    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
                    â”‚ â”‚ KSU Athletics â”‚ â”‚
                    â”‚ â”‚ Research      â”‚ â”‚
                    â”‚ â”‚ - Strategic   â”‚ â”‚
                    â”‚ â”‚   Plan Doc    â”‚ â”‚
                    â”‚ â”‚ - Budget Data â”‚ â”‚
                    â”‚ â”‚ - Conference  â”‚ â”‚
                    â”‚ â”‚   Reports     â”‚ â”‚
                    â”‚ â”‚ - Facility    â”‚ â”‚
                    â”‚ â”‚   Assessments â”‚ â”‚
                    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Flow Sequences

### Flow 1: Voice Agent Budget Query

```
 USER                    VOICE AGENT              KNOWLEDGE BASE         GEMINI API
  â”‚                         â”‚                          â”‚                     â”‚
  â”‚  "What's our largest    â”‚                          â”‚                     â”‚
  â”‚   expense category?"    â”‚                          â”‚                     â”‚
  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                          â”‚                     â”‚
  â”‚                         â”‚                          â”‚                     â”‚
  â”‚                         â”‚  Read budget data        â”‚                     â”‚
  â”‚                         â”‚  from system prompt      â”‚                     â”‚
  â”‚                         â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                     â”‚
  â”‚                         â”‚                          â”‚                     â”‚
  â”‚                         â”‚  { expenseByCategory,    â”‚                     â”‚
  â”‚                         â”‚    totalExpenses, ... }   â”‚                     â”‚
  â”‚                         â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                     â”‚
  â”‚                         â”‚                          â”‚                     â”‚
  â”‚                         â”‚  Generate response with                       â”‚
  â”‚                         â”‚  budget context + question                    â”‚
  â”‚                         â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
  â”‚                         â”‚                                               â”‚
  â”‚                         â”‚  "Personnel costs at $X.XM is the largest..." â”‚
  â”‚                         â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
  â”‚                         â”‚                          â”‚                     â”‚
  â”‚  ðŸ”Š Speaks answer      â”‚                          â”‚                     â”‚
  â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                          â”‚                     â”‚
  â”‚                         â”‚                          â”‚                     â”‚
```

### Flow 2: NotebookLM Query (via query_notebook tool)

```
 USER                    ASSISTANT             UNIFIED QUERY          MCP / ENTERPRISE
  â”‚                         â”‚                      â”‚                       â”‚
  â”‚  "What did the          â”‚                      â”‚                       â”‚
  â”‚   strategic plan say    â”‚                      â”‚                       â”‚
  â”‚   about facilities?"    â”‚                      â”‚                       â”‚
  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                      â”‚                       â”‚
  â”‚                         â”‚                      â”‚                       â”‚
  â”‚                         â”‚  Tool call:          â”‚                       â”‚
  â”‚                         â”‚  query_notebook      â”‚                       â”‚
  â”‚                         â”‚  { q: "facilities" } â”‚                       â”‚
  â”‚                         â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                       â”‚
  â”‚                         â”‚                      â”‚                       â”‚
  â”‚                         â”‚                      â”‚  Try Enterprise API   â”‚
  â”‚                         â”‚                      â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
  â”‚                         â”‚                      â”‚                       â”‚
  â”‚                         â”‚                      â”‚  (if fails, try MCP)  â”‚
  â”‚                         â”‚                      â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
  â”‚                         â”‚                      â”‚                       â”‚
  â”‚                         â”‚                      â”‚  (if fails, local KB) â”‚
  â”‚                         â”‚                      â”‚  Search knowledgeBase â”‚
  â”‚                         â”‚                      â”‚ <â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€â”‚
  â”‚                         â”‚                      â”‚                       â”‚
  â”‚                         â”‚  { answer, sources,  â”‚                       â”‚
  â”‚                         â”‚    confidence }       â”‚                       â”‚
  â”‚                         â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                       â”‚
  â”‚                         â”‚                      â”‚                       â”‚
  â”‚  Answer with citations  â”‚                      â”‚                       â”‚
  â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                      â”‚                       â”‚
  â”‚                         â”‚                      â”‚                       â”‚
```

### Flow 3: Budget Excel Upload + Sync

```
 USER                   BUDGET VIEWER         SHEETJS PARSER        KNOWLEDGE BASE
  â”‚                         â”‚                      â”‚                      â”‚
  â”‚  Upload .xlsx file      â”‚                      â”‚                      â”‚
  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                      â”‚                      â”‚
  â”‚                         â”‚                      â”‚                      â”‚
  â”‚                         â”‚  parseBudgetExcel()  â”‚                      â”‚
  â”‚                         â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                      â”‚
  â”‚                         â”‚                      â”‚                      â”‚
  â”‚                         â”‚                      â”‚ XLSX.read(buffer)    â”‚
  â”‚                         â”‚                      â”‚ Iterate sheets       â”‚
  â”‚                         â”‚                      â”‚ Categorize rows:     â”‚
  â”‚                         â”‚                      â”‚  - Revenue items     â”‚
  â”‚                         â”‚                      â”‚  - Expense items     â”‚
  â”‚                         â”‚                      â”‚  - Capital projects  â”‚
  â”‚                         â”‚                      â”‚ Aggregate totals     â”‚
  â”‚                         â”‚                      â”‚                      â”‚
  â”‚                         â”‚  BudgetSummary {     â”‚                      â”‚
  â”‚                         â”‚   totalRevenue,      â”‚                      â”‚
  â”‚                         â”‚   totalExpenses,     â”‚                      â”‚
  â”‚                         â”‚   netPosition,       â”‚                      â”‚
  â”‚                         â”‚   revenueByCategory, â”‚                      â”‚
  â”‚                         â”‚   expenseByCategory, â”‚                      â”‚
  â”‚                         â”‚   capitalProjects,   â”‚                      â”‚
  â”‚                         â”‚   lineItems[]        â”‚                      â”‚
  â”‚                         â”‚  }                   â”‚                      â”‚
  â”‚                         â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                      â”‚
  â”‚                         â”‚                      â”‚                      â”‚
  â”‚                         â”‚  syncBudgetToKB()    â”‚                      â”‚
  â”‚                         â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚
  â”‚                         â”‚                      â”‚                      â”‚
  â”‚                         â”‚                      â”‚   Merge budget data  â”‚
  â”‚                         â”‚                      â”‚   into KB schema     â”‚
  â”‚                         â”‚                      â”‚   Upsert to Supabase â”‚
  â”‚                         â”‚                      â”‚                      â”‚
  â”‚  Dashboard renders      â”‚                      â”‚                      â”‚
  â”‚  budget metrics         â”‚                      â”‚                      â”‚
  â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                      â”‚                      â”‚
  â”‚                         â”‚                      â”‚                      â”‚
```

### Flow 4: MCP Proxy Server Lifecycle

```
 BROWSER APP              EXPRESS PROXY (:3001)     notebooklm-mcp (stdio)    NOTEBOOKLM
  â”‚                              â”‚                        â”‚                       â”‚
  â”‚  POST /api/query             â”‚                        â”‚                       â”‚
  â”‚  { question: "..." }         â”‚                        â”‚                       â”‚
  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                        â”‚                       â”‚
  â”‚                              â”‚                        â”‚                       â”‚
  â”‚                              â”‚  JSON-RPC request      â”‚                       â”‚
  â”‚                              â”‚  via stdin              â”‚                       â”‚
  â”‚                              â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                       â”‚
  â”‚                              â”‚                        â”‚                       â”‚
  â”‚                              â”‚                        â”‚  HTTP/gRPC to         â”‚
  â”‚                              â”‚                        â”‚  NotebookLM API       â”‚
  â”‚                              â”‚                        â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ >â”‚
  â”‚                              â”‚                        â”‚                       â”‚
  â”‚                              â”‚                        â”‚  Research results     â”‚
  â”‚                              â”‚                        â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
  â”‚                              â”‚                        â”‚                       â”‚
  â”‚                              â”‚  JSON-RPC response     â”‚                       â”‚
  â”‚                              â”‚  via stdout             â”‚                       â”‚
  â”‚                              â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                       â”‚
  â”‚                              â”‚                        â”‚                       â”‚
  â”‚  { answer, sources,         â”‚                        â”‚                       â”‚
  â”‚    metadata }                â”‚                        â”‚                       â”‚
  â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                        â”‚                       â”‚
  â”‚                              â”‚                        â”‚                       â”‚
```

---

## Fallback Chain: queryNotebookLm()

```
queryNotebookLm(question)
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Try Enterprise APIâ”‚ â”€â”€â”€â”€ Success â”€â”€â”€â”€> Return { answer, source: "enterprise" }
â”‚ (Option 3)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚ Fail
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Try MCP Client    â”‚ â”€â”€â”€â”€ Success â”€â”€â”€â”€> Return { answer, source: "mcp" }
â”‚ (Option 1)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚ Fail
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Search Local KB   â”‚ â”€â”€â”€â”€ Success â”€â”€â”€â”€> Return { answer, source: "local_kb" }
â”‚ (knowledgeBase)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚ Fail
        â–¼
  Return { answer: "No data available", source: "none" }
```

---

## Component Dependency Graph

```
App.tsx
  â”œâ”€â”€ Dashboard (5 pillars, KPIs)
  â”œâ”€â”€ BudgetViewer.tsx
  â”‚     â”œâ”€â”€ notebookLmSync.ts â”€â”€â”€â”€ parseBudgetExcel()
  â”‚     â”‚     â””â”€â”€ xlsx (SheetJS)
  â”‚     â””â”€â”€ @google/genai â”€â”€â”€â”€ AI Analysis
  â”œâ”€â”€ NotebookSyncPanel.tsx
  â”‚     â”œâ”€â”€ notebookLmMcp.ts â”€â”€â”€â”€ MCP Client
  â”‚     â”œâ”€â”€ notebookLmSync.ts â”€â”€â”€â”€ Sync Pipeline
  â”‚     â””â”€â”€ notebookLmEnterprise.ts â”€â”€â”€â”€ Enterprise API
  â”œâ”€â”€ StrategicAssistant.tsx
  â”‚     â”œâ”€â”€ knowledgeBase.ts â”€â”€â”€â”€ Budget data in prompts
  â”‚     â”œâ”€â”€ notebookLmEnterprise.ts â”€â”€â”€â”€ query_notebook tool
  â”‚     â””â”€â”€ @google/genai â”€â”€â”€â”€ Gemini (voice + text)
  â””â”€â”€ knowledgeBase.ts
        â””â”€â”€ Supabase â”€â”€â”€â”€ Persistent storage
```

---

*Generated for KSU Athletics Department â€” Taking Flight 2026 Strategic Plan*
